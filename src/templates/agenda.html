{% extends "base.html" %}
{% block title %}Agenda{% endblock %}
{% block content %}
<head>

  <meta charset='utf-8' />
  <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/main.js'></script>
  <link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/main.css' rel='stylesheet' />
  <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.0/locales/es.js'></script> <!-- Agregar el archivo de idioma español -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var calendarEl = document.getElementById('calendar');
      var eventTitleInput = document.getElementById('eventTitle');
      var eventStartDateInput = document.getElementById('eventStartDate');
      var eventEndDateInput = document.getElementById('eventEndDate');
      var addEventButton = document.getElementById('addEventButton');
      var selectedDate = null;

      var today = new Date(); // Obtén la fecha actual
      var initialDate = today.toISOString().slice(0, 10); // Convierte la fecha en el formato YYYY-MM-DD

      var calendar = new FullCalendar.Calendar(calendarEl, {
        headerToolbar: {
          left: 'prev,next today',
          center: 'title',
          right: 'dayGridMonth,timeGridWeek,timeGridDay'
        },
        initialDate: initialDate, // Establece la fecha inicial en la fecha actual
        navLinks: true,
        selectable: true,
        selectMirror: true,
        select: function(arg) {
          selectedDate = arg.start;
        },
        eventClick: function(arg) {
          if (confirm('¿Estás seguro de que deseas eliminar este evento?')) {
            arg.event.remove();
          }
        },
        editable: true,
        dayMaxEvents: true,
        locale: 'es', // Establece el idioma en español
      });

      calendar.render();

      // Event listener to add an event from input fields
      addEventButton.addEventListener('click', function() {
        var title = eventTitleInput.value;
        var startDate = eventStartDateInput.value;
        var endDate = eventEndDateInput.value;

        if (title && startDate && endDate && selectedDate) {
          calendar.addEvent({
            title: title,
            start: startDate,
            end: endDate
          });

          // Clear input fields after adding the event
          eventTitleInput.value = '';
          eventStartDateInput.value = '';
          eventEndDateInput.value = '';
        }
      });
    });
  </script>

 <style>
    body {
      margin: 40px 10px;
      padding: 0;
      font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
      font-size: 14px;
    }

    #calendar {
      max-width: 1100px;
      margin: 0 auto;
    }
  </style>
</head>
</html>
</body>
{% endblock %}
